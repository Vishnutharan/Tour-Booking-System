<div class="admin-dashboard">
  <div class="sidebar">
    <div class="logo">
      <h2>Admin Dashboard</h2>
    </div>
    <nav>
      <ul>
        <li [class.active]="currentSection === 'bookings'" (click)="setSection('bookings')">
          <i class="fas fa-calendar-check"></i> Bookings
        </li>
        <li [class.active]="currentSection === 'places'" (click)="setSection('places')">
          <i class="fas fa-map-marker-alt"></i> Tourist Places
        </li>
        <li [class.active]="currentSection === 'countries'" (click)="setSection('countries')">
          <i class="fas fa-globe"></i> Countries
        </li>
        <li [class.active]="currentSection === 'reviews'" (click)="setSection('reviews')">
          <i class="fas fa-star"></i> Reviews
        </li>
      </ul>
    </nav>
  </div>

  <div class="main-content">
    <header>
      <div class="search-bar">
        <input type="text" placeholder="Search..." [(ngModel)]="searchTerm" (input)="onSearch()" />
      </div>
      <div class="admin-profile">
        <span>Admin</span>
        <img src="assets/admin-avatar.png" alt="Admin" />
      </div>
    </header>

    <div class="dashboard-content">
      <section *ngIf="currentSection === 'bookings'" class="section-content">
        <h2>Booking Management</h2>
        <button (click)="editBooking(null)" class="add-new">Add New Booking</button>
        <table>
          <thead>
            <tr>
              <th>Booking ID</th>
              <th>User</th>
              <th>Date</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let booking of filteredBookings">
              <td>{{ booking.id }}</td>
              <td>{{ booking.name }}</td>
              <td>{{ booking.bookingDate | date }}</td>
              <td>{{ booking.totalAmount | currency }}</td>
              <td>
                <span [class]="'status-' + booking.status.toLowerCase()">
                  {{ booking.status }}
                </span>
              </td>
              <td class="actions">
                <button (click)="editBooking(booking)">Edit</button>
                <button (click)="deleteBooking(booking)" class="delete">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section *ngIf="currentSection === 'reviews'" class="section-content">
        <h2>Reviews Management</h2>
        <button (click)="editReview(null)" class="add-new">Add New Review</button>
        <div class="reviews-grid">
          <div *ngFor="let review of filteredReviews" class="review-card">
            <h3>{{ review.customerName }}</h3>
            <p>{{ review.reviewText }}</p>
            <div class="review-rating">
              <span *ngFor="let star of [].constructor(review.rating); let i = index">
                <i class="fas fa-star"></i>
              </span>
            </div>
            <div class="card-actions">
              <button (click)="editReview(review)">Edit</button>
              <button (click)="deleteReview(review)" class="delete">Delete</button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>

<div class="modal" *ngIf="showEditModal">
  <div class="modal-content">
    <h2>{{ editingItem ? 'Edit ' + currentSection : 'Add New ' + currentSection }}</h2>
    <form [formGroup]="editForm" (ngSubmit)="saveChanges()">
      <div *ngIf="currentSection === 'bookings'">
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text" id="name" formControlName="name" />
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" formControlName="email" />
        </div>
        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="text" id="phone" formControlName="phone" />
        </div>
        <div class="form-group">
          <label for="dateOfTravel">Date of Travel</label>
          <input type="date" id="dateOfTravel" formControlName="dateOfTravel" />
        </div>
        <div class="form-group">
          <label for="numberOfPeople">Number of People</label>
          <input type="number" id="numberOfPeople" formControlName="numberOfPeople" />
        </div>
        <div class="form-group">
          <label for="totalAmount">Total Amount</label>
          <input type="number" id="totalAmount" formControlName="totalAmount" />
        </div>
        <div class="form-group">
          <label for="tax">Tax</label>
          <input type="number" id="tax" formControlName="tax" />
        </div>
        <div class="form-group">
          <label for="finalAmount">Final Amount</label>
          <input type="number" id="finalAmount" formControlName="finalAmount" />
        </div>
      </div>

      <div *ngIf="currentSection === 'reviews'">
        <div class="form-group">
          <label for="customerName">Customer Name</label>
          <input type="text" id="customerName" formControlName="customerName" />
        </div>
        <div class="form-group">
          <label for="rating">Rating</label>
          <input
            type="number"
            id="rating"
            formControlName="rating"
            min="1"
            max="5"
          />
        </div>
        <div class="form-group">
          <label for="reviewText">Review Text</label>
          <textarea id="reviewText" formControlName="reviewText"></textarea>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="!editForm.valid">Save</button>
        <button type="button" (click)="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>